<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${board.title} + ' - PickMeal'">ê²Œì‹œê¸€ ìƒì„¸ - PickMeal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@700;800&family=Jua&family=Nanum+Gothic:wght@700;800&family=Gamja+Flower&family=Black+Han+Sans&display=swap" rel="stylesheet">
  <style>
    body {
        font-family: 'Fredoka', sans-serif;
        background-color: #FFF5F0;
        margin: 0;
        overflow: hidden;
        height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .nav-link { font-family: 'Fredoka', sans-serif; font-weight: 700; font-style: italic; }

    main {
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ë©”ì¸ íƒ€ì´í‹€ ì˜ì—­ ìŠ¤íƒ€ì¼ (ëª©ë¡ í™”ë©´ê³¼ í†µì¼) */
        .main-title-area {
            text-align: left;
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
        }
        .main-title-area h1 {
            color: #FF7F50; /* ì£¼í™©ìƒ‰ í¬ì¸íŠ¸ ì»¬ëŸ¬ */
            font-size: 3em;
            margin: 0;
            /* í…ìŠ¤íŠ¸ í…Œë‘ë¦¬ íš¨ê³¼ (ì„ íƒ ì‚¬í•­) */
            /* -webkit-text-stroke: 1px #6D4C41; */
        }
        .main-title-area p {
            color: #FF7F50;
            font-size: 1.2em;
            margin-top: 10px;
        }

        /* ê²Œì‹œê¸€ ìƒì„¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .board-container {
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 40px;
            width: 100%;
            max-width: 900px;
            box-sizing: border-box;
        }

        /* ê²Œì‹œê¸€ í—¤ë” (ì œëª©, ì •ë³´) */
        .board-header {
            margin-bottom: 20px;
            border-bottom: 2px solid #FF7F50; /* í•˜ë‹¨ ì£¼í™©ìƒ‰ ì„  */
            padding-bottom: 20px;
        }
        .board-title {
            font-size: 2.2em;
            color: #FF7F50; /* ì£¼í™©ìƒ‰ ì œëª© */
            margin: 0 0 15px 0;
            word-break: break-all; /* ê¸´ ì œëª© ì¤„ë°”ê¿ˆ */
        }
        .board-meta {
            display: flex;
            justify-content: space-between;
            color: #777; /* ë©”íƒ€ ì •ë³´ëŠ” íšŒìƒ‰ìœ¼ë¡œ */
            font-size: 1em;
            flex-wrap: wrap; /* ì¢ì€ í™”ë©´ì—ì„œ ì¤„ë°”ê¿ˆ */
            gap: 10px;
        }
        .board-meta span {
            margin-right: 15px;
        }
        .like-count {
            color: #FF7F50;
            font-weight: bold;
        }

        /* ê²Œì‹œê¸€ ë³¸ë¬¸ ì˜ì—­ */
        .board-content {
            padding: 30px 0;
            min-height: 300px; /* ìµœì†Œ ë†’ì´ í™•ë³´ */
            font-size: 1.1em;
            line-height: 1.8;
            color: #444;
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ, ê³µë°± ìœ ì§€ */
        }
        .board-content img {
            max-width: 100%; /* ì´ë¯¸ì§€ ë„˜ì¹¨ ë°©ì§€ */
            height: auto;
            border-radius: 10px;
            margin: 20px 0;
        }

        /* í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ */
        .board-buttons {
            display: flex;
            justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
            gap: 15px;
            margin-top: 30px;
            border-top: 1px solid #eee; /* ìƒë‹¨ íšŒìƒ‰ ì„  */
            padding-top: 30px;
        }

        /* ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .btn {
            padding: 12px 25px;
            border-radius: 30px; /* ë‘¥ê·¼ ë²„íŠ¼ */
            font-size: 1.1em;
            font-family: 'Jua', sans-serif;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        /* ì£¼í™©ìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ìˆ˜ì • ë²„íŠ¼ ë“±) */
        .btn-orange {
            background-color: #FF7F50;
            color: white;
            box-shadow: 0 4px 0 #E64A19; /* ì…ì²´ê° ê·¸ë¦¼ì */
        }
        .btn-orange:hover {
            background-color: #FF6337;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #E64A19;
        }

        /* íšŒìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ëª©ë¡ ë²„íŠ¼) */
        .btn-light {
            background-color: #f0f0f0;
            color: #555;
            box-shadow: 0 4px 0 #d0d0d0;
        }
        .btn-light:hover {
            background-color: #e0e0e0;
            color: #333;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #d0d0d0;
        }

        /* ë¹¨ê°„ìƒ‰ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ì‚­ì œ ë²„íŠ¼) */
        .btn-danger {
            background-color: #FF5252;
            color: white;
            box-shadow: 0 4px 0 #D32F2F;
        }
        .btn-danger:hover {
             background-color: #FF1744;
             transform: translateY(2px);
             box-shadow: 0 2px 0 #D32F2F;
        }

    /* ğŸŠ ìƒì„¸ í˜ì´ì§€ ë³¸ë¬¸(Summernote HTML) ìŠ¤íƒ€ì¼ ë³µêµ¬ ğŸŠ */
    .post-content {
        font-family: 'Fredoka', sans-serif;
        font-size: 20px;
        font-weight: bold;
        color: #444;
        line-height: 1.8;
    }

    /* ê¸€ë¨¸ë¦¬ ê¸°í˜¸ & ë²ˆí˜¸ ë§¤ê¸°ê¸° ë³µêµ¬ */
    .post-content ul {
        list-style-type: disc !important;
        list-style-position: inside !important;
        padding-left: 20px !important;
        margin-bottom: 10px !important;
    }
    .post-content ol {
        list-style-type: decimal !important;
        list-style-position: inside !important;
        padding-left: 20px !important;
        margin-bottom: 10px !important;
    }

    /* ë³¸ë¬¸ ì•ˆì˜ ì‚¬ì§„ì´ ì‚ì ¸ë‚˜ê°€ì§€ ì•Šê²Œ (ë°˜ì‘í˜•) */
    .post-content img {
        max-width: 100%;
        height: auto;
        border-radius: 1rem; /* ì‚¬ì§„ ëª¨ì„œë¦¬ë„ ë‘¥ê¸€ê³  ì˜ˆì˜ê²Œ! */
        margin: 1rem 0;
    }`
  </style>
</head>
<body>

<header th:replace="~{fragments/header :: headerFragment}"></header>
<div class="overflow-y-auto flex-grow" >
  <main class="flex items-center justify-center content-slide-up py-10">
    <div class="main-title-area">
      <h1>COMMUNITY BOARD</h1>
      <p>Share your tasty experiences!</p>
    </div>

    <div class="board-container">
      <div class="board-header">
        <h2 class="board-title" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</h2>

        <div class="board-meta">
          <div>
            <span th:text="'ê¸€ì“´ì´ : ' + ${board.nickname}">ì‘ì„±ì</span>
            <span th:if = "${board.updateDate == null}" th:text="'ì‘ì„±ì¼ : ' + ${#dates.format(board.createDate, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</span>
            <span th:if = "${board.updateDate != null}" th:text="'ìµœì¢… ìˆ˜ì •ì¼ : ' + ${#dates.format(board.updateDate, 'yyyy-MM-dd HH:mm')}">ìµœì¢… ìˆ˜ì •ì¼</span>
          </div>
          <div>
            <span th:text="'VIEWS : ' + ${board.viewCount}">ì¡°íšŒìˆ˜</span>
            <span class="like-count">â¤ï¸ <span th:text="${board.likeCount}">15</span></span>
          </div>
        </div>
      </div>

      <div class="post-content" th:utext="${board.content}"></div>

      <div class="board-buttons">
        <a href="/board/list" class="btn btn-light">ëª©ë¡ìœ¼ë¡œ</a>

        <th:block th:if="${isWriter}">
          <a th:href="@{/board/edit/{boardId}(boardId=${board.boardId})}" class="btn btn-orange">ìˆ˜ì •</a>
          <button type="button" class="btn btn-danger" th:boardId="${board.boardId}" onclick="deleteBoard(this.getAttribute('boardId'))">ì‚­ì œ</button>
        </th:block>
      </div>

    </div>
  </main>
  <footer th:replace="~{fragments/footer :: footerFragment}"></footer>
</div>

<script th:inline="javascript">
    function deleteBoard(boardId) {
        if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const form = document.createElement('form');
            form.method = 'post';
            form.action = `/board/remove/${encodeURIComponent(boardId)}`;

            // 1. íƒ€ì„ë¦¬í”„ë¥¼ í†µí•´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ CSRF í† í° ê°’ ê°€ì ¸ì˜¤ê¸°
            const csrfToken = /*[[${_csrf.token}]]*/ '';
            const csrfParameter = /*[[${_csrf.parameterName}]]*/ '_csrf';

            // 2. í¼ ì•ˆì— ìˆ¨ê²¨ì§„ inputìœ¼ë¡œ CSRF í† í° ì™ ì§‘ì–´ë„£ê¸°
            if (csrfToken) {
                const csrfInput = document.createElement('input');
                csrfInput.type = 'hidden';
                csrfInput.name = csrfParameter;
                csrfInput.value = csrfToken;
                form.appendChild(csrfInput);
            }

            document.body.appendChild(form);
            form.submit();
        }
    }
</script>
</body>
</html>