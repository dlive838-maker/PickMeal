<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pick Meal - My Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Fredoka', sans-serif; background-color: #FFF5F0; margin: 0; }
    .info-card { border-radius: 3rem; background: white; box-shadow: 0 20px 50px rgba(0,0,0,0.05); border: 2px solid #FDF5E6; }
    .label-text { color: #FFB08E; font-size: 0.85rem; font-weight: 800; margin-bottom: 0.2rem; }
    .value-text { font-size: 1.15rem; font-weight: 800; color: #444; margin-bottom: 1.5rem; }

    .tab-btn { transition: all 0.3s ease; border-bottom: 4px solid transparent; }
    .tab-btn.active { color: #FF8A5B; border-bottom-color: #FF8A5B; }

    .content-slide-up { animation: slideUp 0.8s cubic-bezier(0.65, 0, 0.35, 1) forwards; }
    @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>

<body class="min-h-screen flex flex-col">

<header th:replace="~{fragments/header :: headerFragment}"></header>

<main class="flex-grow container mx-auto px-6 pt-40 pb-20 max-w-6xl content-slide-up">

  <div class="flex justify-center mb-16 gap-8 md:gap-16 border-b-2 border-[#FDF5E6]">
    <button onclick="showTab('info')" id="btn-info" class="tab-btn active pb-4 font-black italic text-2xl uppercase tracking-tighter">Info</button>
    <button onclick="showTab('posts')" id="btn-posts" class="tab-btn pb-4 font-black italic text-2xl uppercase tracking-tighter text-gray-400 hover:text-[#FF8A5B]">My Posts</button>
    <button onclick="showTab('favorites')" id="btn-favorites" class="tab-btn pb-4 font-black italic text-2xl uppercase tracking-tighter text-gray-400 hover:text-[#FF8A5B]">Favorites</button>
  </div>

  <div id="info-content" class="tab-pane">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
      <div class="info-card p-12">
        <div><p class="label-text">ì•„ì´ë””</p><p class="value-text" th:text="${displayId}">ID</p></div>
        <div><p class="label-text">ë‹‰ë„¤ì„</p><p class="value-text" th:text="${user.nickname}">Nickname</p></div>
        <div><p class="label-text">ì´ë¦„</p><p class="value-text" th:text="${user.name}">Name</p></div>
        <div><p class="label-text">ìƒë…„ì›”ì¼</p><p class="value-text" th:text="${user.birthDate != null ? #dates.format(user.birthDate, 'yyyyë…„ MMì›” ddì¼') : 'ë¯¸ë“±ë¡'}">Date</p></div>
        <div>
          <p class="label-text">ì „í™”ë²ˆí˜¸</p>
          <p class="value-text"
             th:text="${user.phoneNumber != null ? user.phoneNumber.replaceAll('(\d{3})-(\d{1})\d{3}-(\d{1})\d{3}', '$1-$2***-$3***') : 'ë¯¸ë“±ë¡'}">
            010-1***-5***
          </p>
        </div>

        <div>
          <p class="label-text">ì´ë©”ì¼</p>
          <p class="value-text"
             th:text="${user.email != null ? user.email.replaceAll('(^[^@]{2})[^@]+(@[^@]{1})[^@]+(\.[^@]+$)', '$1******$2*******$3') : 'ë¯¸ë“±ë¡'}">
            aa******@g******.com
          </p>
        </div>
        <div th:if="${user.socialLoginSite != null and user.socialLoginSite != ''}">
          <p class="label-text">ì†Œì…œ ë¡œê·¸ì¸</p>
          <span class="inline-block px-5 py-1.5 bg-orange-50 text-[#FF8A5B] rounded-full text-xs font-black uppercase border border-orange-100" th:text="${user.socialLoginSite}">SITE</span>
        </div>
      </div>
      <div class="info-card p-12 bg-[#FF8A5B]/2">
        <h3 class="text-3xl font-black text-[#FF8A5B] mb-10 italic uppercase tracking-tight">Taste Preference</h3>
        <div class="space-y-10">
          <div><p class="label-text text-blue-400">ì¢‹ì•„í•˜ëŠ” ìŒì‹ â¤ï¸</p><p class="value-text text-2xl" th:text="${user.likeMenu ?: 'ì•„ì§ ë“±ë¡ëœ ì •ë³´ê°€ ì—†ì–´ìš”.'}">ì¹˜í‚¨</p></div>
          <div><p class="label-text text-red-400">ì‹«ì–´í•˜ëŠ” ìŒì‹ ğŸ’”</p><p class="value-text text-2xl" th:text="${user.disLikeMenu ?: 'ì•„ì§ ë“±ë¡ëœ ì •ë³´ê°€ ì—†ì–´ìš”.'}">ê³ ìˆ˜</p></div>
        </div>
      </div>
    </div>

    <div class="mt-20 flex flex-col items-center gap-6">
      <a th:href="@{/users/edit}" class="px-16 py-5 bg-[#FF8A5B] text-white rounded-full font-black text-xl shadow-xl hover:bg-[#e67a4d] hover:scale-105 transition-all duration-300 italic uppercase">Edit Profile</a>
      <form th:action="@{/users/remove}" method="post" onsubmit="return confirm('ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
        <button type="submit" class="px-6 py-2 bg-transparent text-slate-400 rounded-full font-bold text-sm hover:text-red-400 hover:bg-red-50 transition-all duration-300 italic uppercase">Account Withdrawal</button>
      </form>
    </div>
  </div>

  <div id="posts-content" class="tab-pane hidden space-y-6">
    <div th:if="${#lists.isEmpty(myBoards)}" class="info-card p-20 text-center">
      <p class="text-2xl font-black text-gray-300 italic uppercase">No posts written yet! âœï¸</p>
    </div>
    <div th:each="board : ${myBoards}" class="info-card p-8 flex justify-between items-center hover:scale-[1.02] transition-all duration-300 group">
      <div class="flex-grow">
        <p class="label-text" th:text="${#dates.format(board.createDate, 'yyyy.MM.dd')}">2026.02.26</p>
        <a th:href="@{/board/detail/{id}(id=${board.boardId})}" class="text-2xl font-black text-[#444] group-hover:text-[#FF8A5B] transition-colors" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</a>
      </div>
      <div class="flex gap-6 items-center">
        <span class="text-[#FFB08E] font-black italic uppercase text-sm">View [[${board.viewCount}]]</span>
        <a th:href="@{/board/edit/{id}(id=${board.boardId})}" class="bg-gray-50 p-3 rounded-full hover:bg-orange-50 transition-colors">
          <svg class="w-5 h-5 text-[#FF8A5B]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
        </a>
      </div>
    </div>
  </div>

  <div id="favorites-content" class="tab-pane hidden">
    <div class="info-card p-20 text-center">
      <p class="text-2xl font-black text-gray-300 italic uppercase">Favorites function is coming soon! ğŸ•</p>
    </div>
  </div>

</main>

<footer th:replace="~{fragments/footer :: footerFragment}"></footer>

<script>
  function showTab(tabName) {
    document.querySelectorAll('.tab-pane').forEach(el => el.classList.add('hidden'));
    document.querySelectorAll('.tab-btn').forEach(el => {
      el.classList.remove('active', 'text-[#FF8A5B]');
      el.classList.add('text-gray-400');
    });

    document.getElementById(tabName + '-content').classList.remove('hidden');
    const activeBtn = document.getElementById('btn-' + tabName);
    activeBtn.classList.add('active', 'text-[#FF8A5B]');
    activeBtn.classList.remove('text-gray-400');
  }
</script>

</body>
</html>