<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>PickMeal - ë©”ì¸ í™ˆí˜ì´ì§€</title>
  <style>
    /* ì „ì²´ ë°°ê²½ê³¼ ë¶€ë“œëŸ¬ìš´ í°íŠ¸ */
    body {
        background-color: #fff9f1;
        font-family: 'Malgun Gothic', sans-serif;
        text-align: center;
        color: #576574;
        padding: 40px;
    }

    /* ë¡œê³  ëŠë‚Œì˜ í° ì œëª© */
    h1 { color: #ff9f43; font-size: 3rem; margin-bottom: 10px; }
    hr { border: 0; height: 2px; background: #ffeaa7; margin: 30px 0; }

    /* ë©”ì¸ ì¹´ë“œ ë°•ìŠ¤ */
    .menu-card {
        background: white;
        border: 2px solid #ffeaa7;
        padding: 30px;
        border-radius: 25px;
        width: 320px;
        margin: 0 auto;
        box-shadow: 0 8px 15px rgba(0,0,0,0.05);
        display: inline-block; /* ì¹´ë“œë“¤ì´ ì˜†ìœ¼ë¡œ ë‚˜ì—´ë˜ê²Œ í•¨ */
        margin: 10px;
    }

    /* ğŸ ì£¼í™©ìƒ‰ í¬ì¸íŠ¸ ë²„íŠ¼ */
    .btn {
        display: inline-block;
        padding: 12px 25px;
        background-color: #ff9f43;
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-weight: bold;
        transition: 0.3s;
        border: none;
    }

    .btn:hover {
        background-color: #ff6b6b; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ë¶„í™ë¹›ìœ¼ë¡œ! */
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
    }

    /* í•˜ë‹¨ ë­í‚¹ ë³´ê¸° ë²„íŠ¼ ë³„ë„ ìŠ¤íƒ€ì¼ */
    .btn-ranking {
        background-color: #ffa502;
        margin-top: 15px;
    }

    /* ë„¤ì´ë²„ ë¡œê·¸ì¸ ì˜ì—­ ê¹”ë”í•˜ê²Œ */
    .login-section { margin-bottom: 40px; }
  </style>
</head>
<body>
<h1>ğŸ  PickMeal ì„œë¹„ìŠ¤ ì„¼í„°</h1>
<hr>
<div th:if="${userNickname != null}">
  <h3>âœ¨ <span th:text="${userNickname}" style="font-weight: bold; color: #ff4757;">ë³„ëª…</span>ë‹˜, í™ˆí˜ì´ì§€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h3>
  <p style="color: #666; font-size: 0.9em;">(ë°˜ê°‘ìŠµë‹ˆë‹¤, <span th:text="${userName}">ë³¸ëª…</span>ë‹˜!)</p>

  <hr>
  <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; border: 1px solid #e9ecef;">
    <h4 style="margin-top: 0;">ğŸ¥— ë‚˜ì˜ ì…ë§› ì„¤ì •</h4>
    <p style="font-size: 0.85em; color: #888;">ì¢‹ì•„í•˜ê±°ë‚˜ ì‹«ì–´í•˜ëŠ” ìŒì‹ì„ ì ì–´ì£¼ì‹œë©´ ë‚˜ì¤‘ì— ë©”ë‰´ ì¶”ì²œì— í™œìš©í• ê²Œìš”!</p>

    <form th:action="@{/update-menu}" method="post">
      <div style="margin-bottom: 10px;">
        <label style="display: inline-block; width: 100px;">ğŸ‘ ì„ í˜¸ ë©”ë‰´:</label>
        <input type="text" name="likeMenu" th:value="${userLikeMenu}" placeholder="ì˜ˆ: ì œìœ¡ë³¶ìŒ, ì´ˆë°¥" style="padding: 5px; width: 200px;">
      </div>
      <div style="margin-bottom: 15px;">
        <label style="display: inline-block; width: 100px;">ğŸ‘ ë¶ˆí˜¸ ë©”ë‰´:</label>
        <input type="text" name="disLikeMenu" th:value="${userDisLikeMenu}" placeholder="ì˜ˆ: ì˜¤ì´, ê°€ì§€" style="padding: 5px; width: 200px;">
      </div>
      <button type="submit" onclick="alert('ì·¨í–¥ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¥—');" style="background-color: #2ed573; color: white; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">ì·¨í–¥ ì €ì¥í•˜ê¸°</button>
    </form>
  </div>
  <hr>

  <form th:action="@{/logout}" method="post">
    <button type="submit" style="background-color: #f1f2f6; border: 1px solid #ced4da; padding: 5px 15px; border-radius: 5px; cursor: pointer;">ë¡œê·¸ì•„ì›ƒ</button>
  </form>
</div>

<div th:unless="${userNickname != null}">
  <p>ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
  <a href="/oauth2/authorization/naver">
    <img src="https://static.nid.naver.com/oauth/small_g_in.PNG" alt="ë„¤ì´ë²„ ë¡œê·¸ì¸"
    style="width: 150px; height: auto; border-radius: 10px;">
  </a>
</div>


<hr>

<h2>ğŸš€ ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ ë©”ë‰´</h2>
<div style="display: flex; gap: 20px;">
  <div class="menu-card">
    <h3>ğŸ ìŒì‹ ì›”ë“œì»µ</h3>
    <p>ì˜¤ëŠ˜ ë­ ë¨¹ì„ì§€ ê³ ë¯¼ë  ë•? ì›”ë“œì»µìœ¼ë¡œ ê²°ì •í•˜ì„¸ìš”!</p>

    <form action="/game" method="get" style="margin-top: 15px;">

      <div style="margin-bottom: 10px;">
        <label style="display: block; font-size: 0.85em; color: #ff9f43; margin-bottom: 5px;">ì–´ë–¤ ìŒì‹ì„ ì¢‹ì•„í•˜ì„¸ìš”?</label>
        <select name="category" style="padding: 8px; border-radius: 10px; border: 2px solid #ffeaa7; width: 85%;">
          <option value="all">ì „ì²´ë³´ê¸°</option>
          <option value="í•œì‹">í•œì‹</option>
          <option value="ì¤‘ì‹">ì¤‘ì‹</option>
          <option value="ì¼ì‹">ì¼ì‹</option>
          <option value="ì–‘ì‹">ì–‘ì‹</option>
          <option value="ì•„ì‹œì•ˆì‹">ì•„ì‹œì•ˆì‹</option>
        </select>
      </div>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 0.85em; color: #ff9f43; margin-bottom: 5px;">ëª‡ ê°•ìœ¼ë¡œ ì§„í–‰í• ê¹Œìš”?</label>
        <select name="round" style="padding: 8px; border-radius: 10px; border: 2px solid #ffeaa7; width: 85%;">
          <option value="64">64ê°•</option>
          <option value="32">32ê°•</option>
          <option value="16">16ê°•</option>
          <option value="8">8ê°•</option>
          <option value="4">4ê°•</option>
        </select>
      </div>

      <button type="submit" class="btn btn-danger" style="cursor: pointer; width: 100%;">ê²Œì„ ì‹œì‘í•˜ê¸° ğŸš€</button>
    </form>

    <br>
    <a href="/ranking" class="btn btn-ranking" style="display: block; margin-top: 10px; background: #ffa502; color: white; text-decoration: none; border-radius: 5px; padding: 10px;">ğŸ† ì‹¤ì‹œê°„ ë­í‚¹ ë³´ê¸°</a>
  </div>

  <div class="menu-card" style="background-color: #f9f9f9; color: #aaa;">
    <h3>ğŸ” ë§›ì§‘ ê²€ìƒ‰ (ì¤€ë¹„ ì¤‘)</h3>
    <p>íŒ€ì›ì´ ë³‘í•©í•˜ë©´ ì´ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.</p>
    <button disabled>ì»¤ë°ìˆœ</button>
  </div>
</div>
</body>
<script>
  document.addEventListener("DOMContentLoaded", function() {
      // 1. ì¹´í…Œê³ ë¦¬ì™€ ë¼ìš´ë“œ ì„ íƒ ìƒìë¥¼ ë³€ìˆ˜ë¡œ ì €ì¥.
      const categorySelect = document.querySelector('select[name="category"]');
      const roundSelect = document.querySelector('select[name="round"]');

      // 2. ì¹´í…Œê³ ë¦¬ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì‹¤í–‰ë  ê°ì‹œ ì¥ì¹˜(EventListener)ë¥¼ ì„¤ì¹˜.
      categorySelect.addEventListener('change', function() {
          const selectedCategory = this.value; // í˜„ì¬ ì„ íƒëœ ê°’ (all, í•œì‹ ë“±)

          // ê¸°ì¡´ì˜ ë¼ìš´ë“œ ì˜µì…˜ë“¤ì„ ì‹¹ ë¹„ì›Œì¤ë‹ˆë‹¤.
          roundSelect.innerHTML = '';

          if (selectedCategory === 'all') {
              // ğŸŒŸ ì „ì²´ë³´ê¸°ì¼ ë•Œ: 64ê°•ë¶€í„° 8ê°•ê¹Œì§€ ë©”ë‰´ ì œê³µ
              addOption(roundSelect, "64", "64ê°•");
              addOption(roundSelect, "32", "32ê°•");
              addOption(roundSelect, "16", "16ê°•");
              addOption(roundSelect, "8", "8ê°•");
          } else {
              // ğŸ¥— íŠ¹ì • ì¹´í…Œê³ ë¦¬ì¼ ë•Œ: ì‚¬ì§„ ê°œìˆ˜ì— ë§ì¶° 16ê°•ë¶€í„° ë©”ë‰´ ì œê³µ
              addOption(roundSelect, "16", "16ê°•");
              addOption(roundSelect, "8", "8ê°•");
              addOption(roundSelect, "4", "4ê°•");
          }
      });

      // ìƒˆë¡œìš´ ì˜µì…˜ íƒœê·¸ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ë„êµ¬.
      function addOption(target, val, txt) {
          const opt = document.createElement("option");
          opt.value = val;
          opt.text = txt;
          target.appendChild(opt);
      }
  });
</script>
</body>
</html>